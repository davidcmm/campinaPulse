<div class="col-md-12">	
	<canvas id="canvas1"></canvas>
</div>
<div class="col-md-12">	
	<canvas id="canvas2"></canvas>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.7/angular.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.7/angular-cookies.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=places"></script>
<script src="https://contribua.org/comoecampina-static/imgs/dist/fabric.js"></script>

<script>
	var listOfMarks = [[[40.48956298828125,190.06942985911527],[41.48956298828125,190.06942985911527],[42.98956298828125,190.06942985911527],[45.98956298828125,190.06942985911527],[57.98956298828125,190.06942985911527],[76.98956298828125,190.06942985911527],[109.98956298828125,190.06942985911527],[130.98956298828125,192.0694297234816],[155.98956298828125,198.06942931658057],[189.98956298828125,200.0694291809469],[214.98956298828125,200.0694291809469],[232.98956298828125,200.0694291809469],[266.98956298828125,201.06942911313007],[279.98956298828125,205.06942884186273],[295.98956298828125,207.06942870622905],[313.98956298828125,210.06942850277855],[321.98956298828125,210.06942850277855],[327.98956298828125,211.0694284349617],[336.98956298828125,211.0694284349617],[343.98956298828125,212.0694283671449],[346.98956298828125,212.0694283671449],[352.98956298828125,212.0694283671449],[357.98956298828125,214.0694282315112],[361.98956298828125,215.06942816369437],[367.98956298828125,216.06942809587753],[371.98956298828125,217.0694280280607],[374.98956298828125,218.06942796024387],[382.98956298828125,219.06942789242703],[385.98956298828125,219.06942789242703],[387.98956298828125,220.0694278246102],[391.98956298828125,221.06942775679337],[393.98956298828125,222.06942768897653],[396.98956298828125,222.06942768897653],[402.98956298828125,224.06942755334285],[406.98956298828125,224.06942755334285],[410.98956298828125,225.069427485526],[412.98956298828125,226.0694274177092],[415.98956298828125,227.06942734989235],[419.98956298828125,227.06942734989235],[422.98956298828125,227.06942734989235],[426.98956298828125,228.0694272820755],[430.98956298828125,228.0694272820755],[432.98956298828125,229.06942721425867],[435.98956298828125,229.06942721425867],[441.98956298828125,230.06942714644183],[445.98956298828125,230.06942714644183],[452.98956298828125,230.06942714644183],[454.98956298828125,230.06942714644183],[457.98956298828125,230.06942714644183],[462.98956298828125,230.06942714644183],[466.98956298828125,230.06942714644183],[471.98956298828125,230.06942714644183],[477.98956298828125,231.069427078625],[481.98956298828125,231.069427078625],[485.98956298828125,231.069427078625],[491.98956298828125,231.069427078625],[494.98956298828125,231.069427078625],[496.98956298828125,231.069427078625],[499.98956298828125,231.069427078625],[501.98956298828125,231.069427078625],[503.98956298828125,229.06942721425867],[506.98956298828125,227.06942734989235],[510.98956298828125,226.0694274177092],[513.9895629882812,226.0694274177092],[517.9895629882812,225.069427485526],[520.9895629882812,224.06942755334285],[521.9895629882812,224.06942755334285],[524.9895629882812,224.06942755334285],[525.9895629882812,222.06942768897653],[527.9895629882812,221.06942775679337],[531.9895629882812,219.06942789242703],[532.9895629882812,218.06942796024387],[533.9895629882812,218.06942796024387],[533.9895629882812,217.0694280280607]],[[19.48956298828125,347.06941921187206],[20.48956298828125,347.06941921187206],[21.98956298828125,347.06941921187206],[33.98956298828125,347.06941921187206],[56.98956298828125,340.0694196865899],[74.98956298828125,336.06941995785724],[90.98956298828125,334.0694200934909],[104.98956298828125,331.0694202969414],[125.98956298828125,325.06942070384247],[139.98956298828125,321.0694209751098],[162.98956298828125,316.06942131419396],[177.98956298828125,315.06942138201083],[190.98956298828125,315.06942138201083],[205.98956298828125,315.06942138201083],[215.98956298828125,314.06942144982764],[224.98956298828125,310.06942172109495],[235.98956298828125,306.0694219923623],[241.98956298828125,304.069422127996],[246.98956298828125,301.0694223314465],[254.98956298828125,298.069422534897],[259.98956298828125,297.06942260271387],[262.98956298828125,296.0694226705307],[267.98956298828125,294.06942280616437],[271.98956298828125,294.06942280616437],[275.98956298828125,292.06942294179805],[281.98956298828125,291.06942300961487],[284.98956298828125,291.06942300961487],[287.98956298828125,290.0694230774317],[292.98956298828125,289.06942314524855],[296.98956298828125,289.06942314524855],[301.98956298828125,288.06942321306536],[305.98956298828125,286.06942334869905],[307.98956298828125,286.06942334869905],[311.98956298828125,285.06942341651586],[315.98956298828125,285.06942341651586],[322.98956298828125,282.06942361996636],[324.98956298828125,282.06942361996636],[329.98956298828125,281.0694236877832],[332.98956298828125,280.06942375560004],[335.98956298828125,278.0694238912337],[341.98956298828125,277.06942395905054],[344.98956298828125,277.06942395905054],[346.98956298828125,276.0694240268674],[350.98956298828125,275.0694240946842],[353.98956298828125,275.0694240946842],[356.98956298828125,274.0694241625011],[362.98956298828125,272.0694242981347],[365.98956298828125,272.0694242981347],[369.98956298828125,272.0694242981347],[373.98956298828125,272.0694242981347],[376.98956298828125,272.0694242981347],[380.98956298828125,271.0694243659516],[383.98956298828125,271.0694243659516],[389.98956298828125,271.0694243659516],[391.98956298828125,271.0694243659516],[393.98956298828125,271.0694243659516],[394.98956298828125,271.0694243659516],[396.98956298828125,271.0694243659516],[396.98956298828125,271.0694243659516],[397.98956298828125,271.0694243659516],[397.98956298828125,271.0694243659516]],[]];
	var listOfMarks2 = [[[96.48956298828125,312.0694215854613],[97.48956298828125,312.0694215854613],[99.98956298828125,312.0694215854613],[101.98956298828125,312.0694215854613],[107.98956298828125,308.06942185672864],[115.98956298828125,304.069422127996],[123.98956298828125,299.0694224670802],[129.98956298828125,297.06942260271387],[134.98956298828125,295.0694227383475],[142.98956298828125,289.06942314524855],[147.98956298828125,287.0694232808822],[152.98956298828125,285.06942341651586],[160.98956298828125,280.06942375560004],[165.98956298828125,278.0694238912337],[171.98956298828125,277.06942395905054],[179.98956298828125,274.0694241625011],[183.98956298828125,271.0694243659516],[189.98956298828125,270.0694244337684],[195.98956298828125,269.0694245015853],[200.98956298828125,268.0694245694021],[202.98956298828125,267.0694246372189],[209.98956298828125,265.0694247728526],[213.98956298828125,264.0694248406694],[217.98956298828125,262.0694249763031],[224.98956298828125,260.06942511193677],[229.98956298828125,259.0694251797536],[234.98956298828125,258.06942524757045],[243.98956298828125,257.06942531538726],[246.98956298828125,255.06942545102095],[251.98956298828125,254.0694255188378],[257.98956298828125,252.06942565447144],[262.98956298828125,251.0694257222883],[266.98956298828125,250.06942579010513],[270.98956298828125,249.06942585792197],[272.98956298828125,249.06942585792197],[275.98956298828125,248.06942592573878],[282.98956298828125,247.06942599355563],[286.98956298828125,247.06942599355563],[289.98956298828125,247.06942599355563],[293.98956298828125,247.06942599355563],[297.98956298828125,247.06942599355563],[301.98956298828125,247.06942599355563],[306.98956298828125,247.06942599355563],[310.98956298828125,247.06942599355563],[311.98956298828125,247.06942599355563],[315.98956298828125,247.06942599355563],[319.98956298828125,247.06942599355563],[322.98956298828125,247.06942599355563],[327.98956298828125,247.06942599355563],[331.98956298828125,247.06942599355563],[333.98956298828125,247.06942599355563],[334.98956298828125,247.06942599355563],[339.98956298828125,247.06942599355563],[342.98956298828125,247.06942599355563],[345.98956298828125,247.06942599355563],[350.98956298828125,246.06942606137247],[353.98956298828125,246.06942606137247],[354.98956298828125,246.06942606137247],[357.98956298828125,246.06942606137247],[361.98956298828125,246.06942606137247],[365.98956298828125,245.0694261291893],[369.98956298828125,245.0694261291893],[371.98956298828125,245.0694261291893],[373.98956298828125,245.0694261291893],[375.98956298828125,244.06942619700615],[377.98956298828125,244.06942619700615],[379.98956298828125,242.0694263326398],[382.98956298828125,242.0694263326398],[384.98956298828125,241.06942640045665],[386.98956298828125,241.06942640045665],[390.98956298828125,241.06942640045665],[391.98956298828125,241.06942640045665],[393.98956298828125,240.0694264682735],[395.98956298828125,240.0694264682735],[396.98956298828125,240.0694264682735],[396.98956298828125,240.0694264682735],[399.98956298828125,238.06942660390715],[402.98956298828125,237.069426671724],[404.98956298828125,237.069426671724],[406.98956298828125,237.069426671724]],[[507.48956298828125,231.069427078625],[508.48956298828125,231.069427078625],[510.98956298828125,231.069427078625],[514.9895629882812,231.069427078625],[520.9895629882812,231.069427078625],[522.9895629882812,231.069427078625],[525.9895629882812,232.06942701080817],[530.9895629882812,232.06942701080817],[533.9895629882812,234.06942687517449],[537.9895629882812,236.06942673954083],[542.9895629882812,237.069426671724],[545.9895629882812,238.06942660390715],[550.9895629882812,240.0694264682735],[554.9895629882812,240.0694264682735],[556.9895629882812,241.06942640045665],[560.9895629882812,242.0694263326398],[563.9895629882812,244.06942619700615],[564.9895629882812,245.0694261291893],[566.9895629882812,246.06942606137247],[572.9895629882812,249.06942585792197],[574.9895629882812,249.06942585792197],[576.9895629882812,250.06942579010513],[580.9895629882812,251.0694257222883],[581.9895629882812,251.0694257222883],[582.9895629882812,252.06942565447144],[582.9895629882812,252.06942565447144],[582.9895629882812,254.0694255188378],[583.9895629882812,254.0694255188378],[583.9895629882812,254.0694255188378],[583.9895629882812,254.0694255188378],[583.9895629882812,255.06942545102095]],[[414.48956298828125,436.06941317617367],[415.48956298828125,436.06941317617367],[415.98956298828125,432.06941344744104],[423.98956298828125,412.06941480377776],[426.98956298828125,399.0694156853966],[433.98956298828125,374.06941738081747],[434.98956298828125,349.0694190762384],[434.98956298828125,340.0694196865899],[436.98956298828125,330.0694203647583],[439.98956298828125,317.06942124637715],[441.98956298828125,308.06942185672864],[443.98956298828125,296.0694226705307],[446.98956298828125,278.0694238912337],[447.98956298828125,270.0694244337684],[449.98956298828125,264.0694248406694],[449.98956298828125,261.06942504411995],[449.98956298828125,261.06942504411995],[449.98956298828125,260.06942511193677],[451.98956298828125,256.06942538320413],[452.98956298828125,251.0694257222883],[456.98956298828125,244.06942619700615],[457.98956298828125,240.0694264682735],[457.98956298828125,239.0694265360903],[457.98956298828125,239.0694265360903],[457.98956298828125,238.06942660390715],[461.98956298828125,234.06942687517449],[461.98956298828125,234.06942687517449],[461.98956298828125,234.06942687517449]]];

	var canvasID = "canvas1";
	var canvas;

	function configFabric() {
		var $ = function(id){return document.getElementById(id)};
	
		canvas = this.__canvas = new fabric.Canvas(canvasID, {
		   	isDrawingMode: true,
			selection: false
		});

		if (screen.width <= 768){//For phones use whole width
			canvas.setWidth(window.innerWidth * 0.8);
			canvas.setHeight((window.innerWidth*0.8)/1.3333);
		}else if (screen.width <= 1200){
			canvas.setWidth(500);
			canvas.setHeight(375);
		}else{
			canvas.setWidth(600);
			canvas.setHeight(450);
		}


		fabric.Object.prototype.transparentCorners = false;

		var drawingColorEl = "#005E7A",
		      drawingShadowColorEl = "#005E7A",
		      drawingLineWidthEl = 10,
		      drawingShadowWidth = 0,
		      drawingShadowOffset = 0;

		if (canvas.freeDrawingBrush) {
		
			canvas.freeDrawingBrush.color = drawingColorEl;
			canvas.freeDrawingBrush.width = parseInt(drawingLineWidthEl, 10) || 1;
			canvas.freeDrawingBrush.shadow = new fabric.Shadow({
				blur: parseInt(drawingShadowWidth, 10) || 0,
				offsetX: 0,
				offsetY: 0,
				affectStroke: true,
				color: drawingShadowColorEl
			});

			canvas.freeDrawingBrush.onMouseMove = function(pointer){
			      this._captureDrawingPath(pointer);
			      this.canvas.clearContext(this.canvas.contextTop);
			      this._render();
			}

			canvas.freeDrawingBrush.onMouseDown = function(pointer){
			      this._prepareForDrawing(pointer);
			      // capture coordinates immediately
			      // this allows to draw dots (when movement never occurs)
			      this._captureDrawingPath(pointer);
			      this._render();
			}

			canvas.freeDrawingBrush.onMouseUp = function(){
				this._finalizeAndAddPath();
			}
	      }
	}

	configFabric();
	//loadImage();

	for (i = 0; i < listOfMarks.length; i++) {
		var currentList = listOfMarks[i];
		for (j = 0; j < currentList.length; j++) {
			/*if (j === 0){
				canvas._prepareForDrawing({x: currentList[j][0], y: currentList[j][1]});
				canvas._captureDrawingPath({x: currentList[j][0], y: currentList[j][1]});
				canvas._render();
			}else{
				canvas._captureDrawingPath({x: currentList[j][0], y: currentList[j][1]});
				canvas.clearContext(canvas.contextTop);
				canvas._render();
			}

			if (j === currentList.length-1){
				canvas._finalizeAndAddPath();
			}*/
			var circle = new fabric.Circle({
				radius: 10, fill: 'green', left: currentList[j][0], top: currentList[j][1]
			});
			circle.originX = "center";
			circle.originY = "center";
			canvas.add(circle);
			//canvas.freeDrawingBrush._points = currentList[j];
		}
	}

	canvas.setBackgroundImage("https://contribua.org/bairros/oeste/catole/R._In\u00e1cio_Marqu\u00eas_da_Silva_120_22.jpg", 		canvas.renderAll.bind(canvas));

	//Second image
	var canvasID = "canvas2";
	var canvas;
	configFabric();
	//loadImage();

	for (i = 0; i < listOfMarks2.length; i++) {
		var currentList = listOfMarks2[i];
		for (j = 0; j < currentList.length; j++) {
			/*if (j === 0){
				canvas._prepareForDrawing({x: currentList[j][0], y: currentList[j][1]});
				canvas._captureDrawingPath({x: currentList[j][0], y: currentList[j][1]});
				canvas._render();
			}else{
				canvas._captureDrawingPath({x: currentList[j][0], y: currentList[j][1]});
				canvas.clearContext(canvas.contextTop);
				canvas._render();
			}

			if (j === currentList.length-1){
				canvas._finalizeAndAddPath();
			}*/
			var circle = new fabric.Circle({
				radius: 10, fill: 'red', left: currentList[j][0], top: currentList[j][1]
			});
			circle.originX = "center";
			circle.originY = "center";
			canvas.add(circle);
			//canvas.freeDrawingBrush._points = currentList[j];
		}
	}

	canvas.setBackgroundImage("https://contribua.org/bairros/oeste/catole/R._In\u00e1cio_Marqu\u00eas_da_Silva_500_22.jpg", 		canvas.renderAll.bind(canvas));


</script>
